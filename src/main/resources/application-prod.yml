server:
  port: ${PORT:8080}
  # Basic request-size limits (public demo)
  tomcat:
    max-http-form-post-size: 262144   # 256KB
    max-swallow-size: 262144         # 256KB

spring:
  datasource:
    # Render/Supabase/etc: set these env vars
    url: ${SPRING_DATASOURCE_URL:}
    username: ${SPRING_DATASOURCE_USERNAME:}
    password: ${SPRING_DATASOURCE_PASSWORD:}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: false
    properties:
      hibernate:
        format_sql: false

  servlet:
    multipart:
      enabled: false
      max-file-size: 0
      max-request-size: 0

# Public demo behavior
demo:
  reset:
    enabled: ${DEMO_RESET_ENABLED:true}
    cron: ${DEMO_RESET_CRON:0 0 0 * * *}
    zone: ${DEMO_RESET_ZONE:America/New_York}

  # Public demo safety guards (rate limits)
  guard:
    enabled: ${DEMO_GUARD_ENABLED:true}
    reset:
      # per IP
      max-per-minute: ${DEMO_GUARD_RESET_MAX_PER_MINUTE:6}
      cooldown-seconds: ${DEMO_GUARD_RESET_COOLDOWN_SECONDS:20}
    writes:
      # per IP, for POST/PUT/DELETE under /api/*
      max-per-minute: ${DEMO_GUARD_WRITES_MAX_PER_MINUTE:120}

app:
  cors:
    # comma-separated allowlist. Example: "https://your-vercel-app.vercel.app,https://expense.yourdomain.com"
    allowed-origins: ${APP_CORS_ALLOWED_ORIGINS:*}
